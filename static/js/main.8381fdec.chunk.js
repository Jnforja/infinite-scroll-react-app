(this["webpackJsonpinfinite-scroll-react-app"]=this["webpackJsonpinfinite-scroll-react-app"]||[]).push([[0],{10:function(e,t,n){e.exports=n(17)},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(7),c=n.n(s);n(15),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=n(4),i=n.n(o),u=n(9),l=n(8),p=n(5),E=n(2);function m(e,t){switch(e.status){case"IDLE":case"ERROR":return"START_FETCH"===t.type?Object(E.a)({},e,{status:"LOADING"}):e;case"LOADING":return"FETCH_ERROR"===t.type?Object(E.a)({},e,{status:"ERROR"}):"REACHED_END"===t.type?Object(E.a)({},e,{status:"FINISHED"}):"FETCH_SUCCESS"===t.type?Object(E.a)({},e,{imagesUrls:[].concat(Object(p.a)(e.imagesUrls),Object(p.a)(t.payload.imagesUrls)),pageNumber:e.pageNumber+1,status:"IDLE"}):e;case"FINISHED":return e;default:throw new Error("Unknown state")}}function b(){return(b=Object(l.a)(i.a.mark((function e(t,n,a){var r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a("https://picsum.photos/v2/list?page=".concat(t.pageNumber,"&limit=5"));case 3:if(200!==(r=e.sent).status){e.next=13;break}return e.next=7,r.json();case 7:if(0!==(s=e.sent).length){e.next=10;break}return e.abrupt("return",n({type:"REACHED_END"}));case 10:return e.abrupt("return",n({type:"FETCH_SUCCESS",payload:{imagesUrls:s.map((function(e){return e.download_url}))}}));case 13:n({type:"FETCH_ERROR"});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),n({type:"FETCH_ERROR"});case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}var f={imagesUrls:[],status:"IDLE",pageNumber:1};function h(e){var t=e.fetch,n=void 0===t?window.fetch:t,s=e.IntersectionObserver,c=void 0===s?window.IntersectionObserver:s,o=Object(a.useReducer)(m,f),i=Object(u.a)(o,2),l=i[0],p=i[1];Object(a.useEffect)((function(){"LOADING"===l.status&&function(e,t,n){b.apply(this,arguments)}(l,p,n)}),[n,l]);var E=Object(a.useCallback)((function(e){null!==e&&new c((function(e){e.forEach((function(e){1===e.intersectionRatio&&p({type:"START_FETCH"})}))}),{threshold:1}).observe(e)}),[c]);return r.a.createElement(r.a.Fragment,null,l.imagesUrls.map((function(e){return r.a.createElement("img",{key:e,style:d,src:e,alt:"from picsum"})})),"ERROR"===l.status&&r.a.createElement("button",{type:"button",onClick:function(){return p({type:"START_FETCH"})}},"Error! Click to try again"),"LOADING"===l.status&&r.a.createElement("p",null,"Loading..."),"FINISHED"===l.status&&r.a.createElement("p",null,"There aren't more images"),r.a.createElement("div",{"data-testid":"bottom-border",ref:E}))}var d={width:"300px",height:"200px",display:"block",marginBottom:"20px"};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.8381fdec.chunk.js.map